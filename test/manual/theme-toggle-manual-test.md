# 主题切换功能手动测试指南

## 测试目标

验证智能门锁 Pro 应用的主题切换功能是否正常工作。

## 测试环境

- 浏览器：Chrome、Firefox、Safari、Edge
- 设备：桌面浏览器和移动设备

## 测试步骤

### 1. 初始主题加载测试

**目的**：验证应用启动时能正确加载主题偏好

**步骤**：

1. 清空浏览器的 localStorage（开发者工具 -> Application -> Local Storage -> 清空）
2. 刷新页面
3. 观察应用的主题

**预期结果**：

- 如果系统设置为深色模式，应用应显示深色主题
- 如果系统设置为浅色模式，应用应显示浅色主题
- 默认情况下应显示浅色主题

### 2. 主题切换 UI 测试

**目的**：验证主题切换开关是否正常显示和工作

**步骤**：

1. 打开应用
2. 点击底部导航栏的"设置"标签
3. 滚动到"外观设置"分组
4. 观察主题切换开关

**预期结果**：

- 应该看到一个主题切换开关
- 开关左侧显示太阳图标（浅色模式）或月亮图标（深色模式）
- 开关下方显示当前主题状态文本
- 开关应该有平滑的动画效果

### 3. 主题切换功能测试

**目的**：验证点击开关能正确切换主题

**步骤**：

1. 在设置页面找到主题切换开关
2. 点击开关
3. 观察应用的变化

**预期结果**：

- 开关应该有平滑的滑动动画
- 应用的背景色、文本色应该立即改变
- 所有页面（首页、监控页、设置页）的颜色都应该更新
- 底部导航栏的颜色也应该更新

### 4. 主题持久化测试

**目的**：验证主题偏好能正确保存和恢复

**步骤**：

1. 切换到深色模式
2. 刷新页面
3. 观察应用的主题

**预期结果**：

- 刷新后应用应该保持深色模式
- 不应该闪烁或短暂显示浅色模式

**步骤**：

1. 切换到浅色模式
2. 关闭浏览器标签页
3. 重新打开应用
4. 观察应用的主题

**预期结果**：

- 重新打开后应用应该保持浅色模式

### 5. 多次切换测试

**目的**：验证连续切换主题不会出现问题

**步骤**：

1. 连续点击主题切换开关 5-10 次
2. 观察应用的响应

**预期结果**：

- 每次点击都应该正确切换主题
- 不应该出现卡顿或错误
- 动画应该流畅

### 6. 跨页面一致性测试

**目的**：验证主题在所有页面都保持一致

**步骤**：

1. 在设置页面切换到深色模式
2. 切换到首页
3. 切换到监控页
4. 再切换回设置页

**预期结果**：

- 所有页面都应该显示深色主题
- 页面切换时主题不应该改变

### 7. 系统主题跟随测试（可选）

**目的**：验证应用能跟随系统主题变化

**步骤**：

1. 清空 localStorage 中的主题偏好
2. 在操作系统设置中切换系统主题（浅色 <-> 深色）
3. 观察应用的变化

**预期结果**：

- 当用户没有手动设置主题偏好时，应用应该跟随系统主题
- 当用户手动设置了主题偏好后，应用应该保持用户的选择，不跟随系统主题

### 8. localStorage 验证测试

**目的**：验证主题偏好正确保存到 localStorage

**步骤**：

1. 打开浏览器开发者工具
2. 切换到 Application 标签
3. 展开 Local Storage
4. 切换主题
5. 观察 localStorage 中的 "theme" 键值

**预期结果**：

- 切换到深色模式时，localStorage 中应该有 `theme: "dark"`
- 切换到浅色模式时，localStorage 中应该有 `theme: "light"`

## 已知问题

无

## 测试结果记录

| 测试项            | 测试日期 | 测试人 | 结果 | 备注 |
| ----------------- | -------- | ------ | ---- | ---- |
| 初始主题加载      |          |        |      |      |
| 主题切换 UI       |          |        |      |      |
| 主题切换功能      |          |        |      |      |
| 主题持久化        |          |        |      |      |
| 多次切换          |          |        |      |      |
| 跨页面一致性      |          |        |      |      |
| 系统主题跟随      |          |        |      |      |
| localStorage 验证 |          |        |      |      |

## 注意事项

1. 测试时请确保浏览器支持 `prefers-color-scheme` 媒体查询
2. 测试时请确保浏览器允许 localStorage 访问
3. 如果发现问题，请记录详细的复现步骤和浏览器版本信息
