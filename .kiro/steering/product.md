---
inclusion: always
---

# 产品概述

智能门锁 Pro 是一款移动优先的 Web 应用，用于控制和监控智能猫眼门锁系统。

## 核心功能

| 功能 | 描述 | 技术实现 |
|------|------|----------|
| 实时监控 | 门锁摄像头视频流 + FPS 统计 | JPEG 帧通过 WebSocket 二进制传输 |
| 双向对讲 | 与访客语音通话 | PCM 音频 (接收 16kHz / 发送 24kHz) |
| 人脸管理 | 注册、列表、删除授权人员 | Base64 图片 + 时间段权限 |
| 到访记录 | 访客历史及开门/拒绝状态 | 实时推送通知 |
| 设备连接 | WebSocket 长连接通信 | 自定义二进制协议 v2 |

## 目标用户

家庭用户，管理智能门锁设备。UI 全中文。

## 关键交互流程

1. **连接设备**: WebSocket 握手 → 发送 `hello` 认证消息 → 等待 `status: ok`
2. **视频监控**: 接收二进制帧 (16 字节头 + JPEG payload) → Blob URL 渲染
3. **语音对讲**: 点击按钮激活麦克风 → PCM 采集 → 实时发送
4. **人脸注册**: 拍照/选图 → Base64 编码 → 设置时间权限 → 提交

## 产品约束

- 音频播放需用户交互后才能激活 (浏览器安全策略)
- 麦克风访问需 HTTPS 或 localhost 环境
- 所有 UI 文本、日志消息使用中文
- 移动端优先设计，适配 Capacitor 打包
