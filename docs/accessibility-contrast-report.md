# 可访问性对比度验证报告

## 测试日期

2026-02-01

## 测试标准

WCAG 2.1 AA 标准：

- 正常文本（16px 及以上）：对比度 ≥ 4.5:1
- 大文本（18px 粗体或 24px 及以上）：对比度 ≥ 3:1
- 交互元素：对比度 ≥ 3:1

## 测试结果总结

**总计测试**: 44 个颜色组合  
**通过**: 31 个 (70.5%)  
**失败**: 13 个 (29.5%)

## 失败的测试项

### 1. 浅色模式 - 大文本对比度问题

#### 1.1 三级文本 (secondary-400) 在白色背景上

- **当前对比度**: 2.56:1
- **需要对比度**: 3:1
- **差距**: -0.44:1
- **建议**: 使用 secondary-500 (对比度 3.69:1) 替代 secondary-400

#### 1.2 占位符文本 (secondary-400) 在 secondary-50 背景上

- **当前对比度**: 2.45:1
- **需要对比度**: 3:1
- **差距**: -0.55:1
- **建议**: 使用 secondary-500 (对比度 3.53:1) 替代 secondary-400

### 2. 浅色模式 - 交互元素对比度问题

#### 2.1 主要按钮文本 (white) 在 primary-500 背景上

- **当前对比度**: 4.28:1
- **需要对比度**: 4.5:1
- **差距**: -0.22:1
- **建议**: 使用 primary-600 (对比度 6.08:1) 替代 primary-500

#### 2.2 成功按钮文本 (white) 在 success-500 背景上

- **当前对比度**: 2.28:1
- **需要对比度**: 4.5:1
- **差距**: -2.22:1
- **建议**: 使用 success-700 (对比度 5.13:1) 替代 success-500

#### 2.3 错误按钮文本 (white) 在 error-500 背景上

- **当前对比度**: 3.76:1
- **需要对比度**: 4.5:1
- **差距**: -0.74:1
- **建议**: 使用 error-600 (对比度 5.58:1) 替代 error-500

#### 2.4 边框 (secondary-200) 在白色背景上

- **当前对比度**: 1.23:1
- **需要对比度**: 3:1
- **差距**: -1.77:1
- **说明**: 边框颜色对比度不足是常见问题，可以接受较低对比度，因为边框通常与其他视觉元素（如阴影、内容）配合使用

### 3. 深色模式 - 交互元素对比度问题

#### 3.1 成功按钮文本 (white) 在 success-600 背景上

- **当前对比度**: 3.30:1
- **需要对比度**: 4.5:1
- **差距**: -1.20:1
- **建议**: 使用 success-700 (对比度 5.13:1) 替代 success-600

#### 3.2 边框 (secondary-700) 在 secondary-950 背景上

- **当前对比度**: 1.95:1
- **需要对比度**: 3:1
- **差距**: -1.05:1
- **说明**: 同浅色模式边框问题，可以接受较低对比度

### 4. 状态指示器对比度问题

#### 4.1 在线状态 (success-500) 在白色背景上

- **当前对比度**: 2.28:1
- **需要对比度**: 3:1
- **差距**: -0.72:1
- **建议**: 使用 success-600 (对比度 3.30:1) 替代 success-500

#### 4.2 警告状态 (warning-500) 在白色背景上

- **当前对比度**: 2.15:1
- **需要对比度**: 3:1
- **差距**: -0.85:1
- **建议**: 使用 warning-600 (对比度 3.11:1) 替代 warning-500

### 5. 导航栏对比度问题

#### 5.1 未激活状态 (secondary-400) 在白色背景上

- **当前对比度**: 2.56:1
- **需要对比度**: 3:1
- **差距**: -0.44:1
- **建议**: 使用 secondary-500 (对比度 3.69:1) 替代 secondary-400

### 6. 表单输入对比度问题

#### 6.1 输入框占位符 (secondary-400) 在白色背景上

- **当前对比度**: 2.56:1
- **需要对比度**: 3:1
- **差距**: -0.44:1
- **建议**: 使用 secondary-500 (对比度 3.69:1) 替代 secondary-400

## 通过的测试项（示例）

### 浅色模式

- ✓ 主要文本 (secondary-900) 在白色背景上: 17.85:1
- ✓ 次要文本 (secondary-600) 在白色背景上: 7.58:1
- ✓ 成功文本 (success-900) 在 success-50 背景上: 8.70:1
- ✓ 警告文本 (warning-900) 在 warning-50 背景上: 8.75:1
- ✓ 错误文本 (error-900) 在 error-50 背景上: 9.16:1

### 深色模式

- ✓ 主要文本 (secondary-50) 在 secondary-950 背景上: 19.28:1
- ✓ 次要文本 (secondary-300) 在 secondary-950 背景上: 13.59:1
- ✓ 主按钮文本 (white) 在 primary-600 背景上: 6.08:1
- ✓ 成功文本 (success-100) 在 success-950 背景上: 13.57:1
- ✓ 错误按钮文本 (white) 在 error-600 背景上: 5.58:1

## 修复建议

### 优先级 1：必须修复（对比度差距 > 1.0）

1. **成功按钮文本 (white) 在 success-500 背景上**
   - 修改前: `bg-success-500` (对比度 2.28:1)
   - 修改后: `bg-success-700` (对比度 5.13:1)
   - 影响范围: 所有成功按钮

2. **边框颜色**
   - 浅色模式: `border-secondary-200` (对比度 1.23:1)
   - 深色模式: `border-secondary-700` (对比度 1.95:1)
   - 说明: 边框通常与其他视觉元素配合，可以接受较低对比度，但建议增加阴影或其他视觉提示

3. **成功按钮文本 (white) 在 success-600 背景上（深色模式）**
   - 修改前: `dark:bg-success-600` (对比度 3.30:1)
   - 修改后: `dark:bg-success-700` (对比度 5.13:1)

### 优先级 2：建议修复（对比度差距 0.5-1.0）

1. **错误按钮文本 (white) 在 error-500 背景上**
   - 修改前: `bg-error-500` (对比度 3.76:1)
   - 修改后: `bg-error-600` (对比度 5.58:1)

2. **警告状态指示器**
   - 修改前: `bg-warning-500` (对比度 2.15:1)
   - 修改后: `bg-warning-600` (对比度 3.11:1)

3. **在线状态指示器**
   - 修改前: `bg-success-500` (对比度 2.28:1)
   - 修改后: `bg-success-600` (对比度 3.30:1)

4. **占位符文本和三级文本**
   - 修改前: `text-secondary-400` (对比度 2.56:1)
   - 修改后: `text-secondary-500` (对比度 3.69:1)

### 优先级 3：可选修复（对比度差距 < 0.5）

1. **主要按钮文本 (white) 在 primary-500 背景上**
   - 修改前: `bg-primary-500` (对比度 4.28:1)
   - 修改后: `bg-primary-600` (对比度 6.08:1)
   - 说明: 当前对比度接近标准，但建议修复以确保完全合规

## 实施计划

### 阶段 1：立即修复（优先级 1）

1. 更新所有成功按钮的背景色
2. 评估边框颜色的使用场景，考虑添加阴影或其他视觉提示

### 阶段 2：短期修复（优先级 2）

1. 更新错误按钮的背景色
2. 更新状态指示器的颜色
3. 更新占位符文本和三级文本的颜色

### 阶段 3：长期优化（优先级 3）

1. 更新主要按钮的背景色
2. 进行全面的视觉回归测试

## 注意事项

1. **占位符文本**: WCAG 标准对占位符文本的对比度要求较为宽松，因为它们是临时性的提示文本。但为了更好的可访问性，建议仍然满足 3:1 的对比度。

2. **边框颜色**: 边框通常与其他视觉元素（如阴影、背景色差异）配合使用，因此可以接受较低的对比度。但如果边框是唯一的视觉分隔符，则应满足 3:1 的对比度。

3. **状态指示器**: 状态指示器通常配合文本或图标使用，颜色不应是传达信息的唯一方式。建议在状态指示器旁边添加文本标签。

4. **按钮文本**: 按钮文本的对比度要求最为严格，必须满足 4.5:1 的标准，以确保所有用户都能清晰地看到按钮上的文字。

## 测试工具

本报告使用以下工具生成：

- **测试框架**: Vitest
- **对比度计算**: color 库
- **标准**: WCAG 2.1 AA

## 下一步行动

1. ✅ 完成对比度验证测试
2. ⏳ 根据报告修复对比度问题
3. ⏳ 重新运行测试验证修复效果
4. ⏳ 更新设计文档中的颜色使用指南
5. ⏳ 进行键盘导航测试
6. ⏳ 进行屏幕阅读器测试（可选）

## 结论

配色系统的大部分颜色组合都符合 WCAG 2.1 AA 标准，但仍有 13 个组合需要调整。主要问题集中在：

1. 按钮背景色（特别是成功和错误按钮）
2. 占位符文本和三级文本
3. 状态指示器
4. 边框颜色

建议按照优先级逐步修复这些问题，以确保应用的可访问性符合标准。
